@page
@model IndexModel
@{
    ViewData["Title"] = "Home";
}



@section Scripts {
    <script>
        $(document).ready(function() {
            console.log('Initializing Bootstrap Datepicker...');

            // Completely destroy any existing datepickers
            $('#checkin_date, #checkout_date').datepicker('remove');

            // Get today's date properly
            var today = new Date();
            var tomorrow = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);
            var dayAfter = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 2);

            console.log('Today:', today);
            console.log('Tomorrow:', tomorrow);

            // Initialize with Bootstrap Datepicker specific options
            $('#checkin_date, #checkout_date').datepicker({
                format: 'yyyy-mm-dd',
                startDate: today,                    // Use Date object, not string
                endDate: '+1y',
                defaultViewDate: today,              // Force view to start from today
                autoclose: true,
                todayHighlight: true,
                orientation: 'bottom auto',
                assumeNearbyYear: true,
                todayBtn: 'linked'
            });

            // Set the default dates
            $('#checkin_date').datepicker('setDate', tomorrow);
            $('#checkout_date').datepicker('setDate', dayAfter);

            console.log('Datepicker initialized with dates');
        });
    </script>
}

@section Styles {
    <style>
        .site-hero-inner {
            height: 60vh !important;
            min-height: 400px !important;
            align-items: flex-start !important;
            padding-top: 180px !important;
        }

        .check-availabilty {
            margin-top: -270px !important;
        }
    </style>
}

<!-- Hero Section -->
<section class="site-hero overlay" style="background-image: url(/images/hero_image.jpg)" data-stellar-background-ratio="0.5">
    <div class="container">
        <div class="row site-hero-inner justify-content-center align-items-center">
            <div class="col-md-10 text-center" data-aos="fade-up">
                <span class="custom-caption text-uppercase text-white d-block mb-3">Area42<span></span> Recreational Park</span>
                <h1 class="heading">Not Classified.    Just Unforgettable.</h1>
            </div>
        </div>
    </div>
</section>
<!-- END Hero section -->

<!-- Booking Form Section -->
<section class="section pb-0">
    <div class="container">
        <div class="row check-availabilty" id="next">
            <div class="block-32" data-aos="fade-up" data-aos-offset="-200">
                <form method="post">
                    <div class="row">
                        <div class="col-md-6 mb-3 mb-lg-0 col-lg-3">
                            <label for="checkin_date" class="font-weight-bold text-black">Check In</label>
                            <div class="field-icon-wrap">
                                <div class="icon"><span class="icon-calendar"></span></div>
                                <input type="text" id="checkin_date" name="CheckInDate" class="form-control" asp-for="Booking.CheckInDate" readonly>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3 mb-lg-0 col-lg-3">
                            <label for="checkout_date" class="font-weight-bold text-black">Check Out</label>
                            <div class="field-icon-wrap">
                                <div class="icon"><span class="icon-calendar"></span></div>
                                <input type="text" id="checkout_date" name="CheckOutDate" class="form-control" asp-for="Booking.CheckOutDate" readonly>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3 mb-md-0 col-lg-3">
                            <label for="guests" class="font-weight-bold text-black">Guests</label>
                            <div class="field-icon-wrap">
                                <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                                <select name="Guests" id="guests" class="form-control" asp-for="Booking.Guests">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3 align-self-end">
                            <button type="submit" class="btn btn-primary btn-block text-white">Check Availabilty</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<!-- END Booking Form section -->


<!-- Accommodations Section -->
<section class="section">
    <div class="container">
        <!-- General Header -->
        <div class="row justify-content-center text-center mb-5">
            <div class="col-md-7">
                <h2 class="heading" data-aos="fade-up">Accommodaties</h2>
                <p data-aos="fade-up" data-aos-delay="100">Ontdek onze unieke accommodaties in het hart van Area42. Van gezellige chalets tot comfortabele hotelkamers.</p>
            </div>
        </div>

        <!-- Chalets Overview -->
        <div class="row mb-5">
            <div class="col-lg-6 mb-4 mb-lg-0" data-aos="fade-up">
                <div class="accommodation-category">
                    <h3 class="text-center mb-4">Chalets</h3>

                    <!-- 3 Chalet Images with Individual Prices -->
                    <div class="row">
                        @if (Model.Accommodations != null && Model.Accommodations.Where(a => a._subtype.Contains("Chalet")).Any())
                        {
                            @foreach (var chalet in Model.Accommodations.Where(a => a._subtype.Contains("Chalet")).Take(3))
                            {
                                <div class="col-md-4 mb-3">
                                    <figure class="img-wrap">
                                        <img src="@GetImageUrl(chalet._subtype)"
                                             alt="@chalet._subtype"
                                             class="img-fluid rounded">
                                        <div class="text-center mt-2">
                                            <h6 class="accommodation-name">@chalet._subtype</h6>
                                            <p class="individual-price">
                                                <strong>€@chalet._pricePerNight</strong>
                                                <small class="text-muted d-block">per nacht</small>
                                            </p>
                                        </div>
                                    </figure>
                                </div>
                            }
                        }
                        else
                        {
                            <!-- Fallback if no chalets available -->
                            <div class="col-12 text-center">
                                <p class="text-muted">Geen chalets beschikbaar</p>
                            </div>
                        }
                    </div>

                    <!-- Price Range Summary -->
                    <div class="text-center mt-3">
                        @if (Model.Accommodations != null && Model.Accommodations.Where(a => a._subtype.Contains("Chalet")).Any())
                        {
                            var chaletPrices = Model.Accommodations.Where(a => a._subtype.Contains("Chalet")).ToList();
                            var minPrice = chaletPrices.Min(c => c._pricePerNight);
                            var maxPrice = chaletPrices.Max(c => c._pricePerNight);

                            <p class="price-range-summary">
                                <small>Prijsbereik: €@minPrice - €@maxPrice per nacht</small>
                            </p>
                        }
                    </div>

                    <!-- Single Button -->
                    <div class="text-center">
                        <a asp-page="/Chalet" class="btn btn-primary text-white px-5 py-3">Bekijk Alle Chalets</a>
                    </div>
                </div>
            </div>

            <!-- Hotels Overview -->
            <div class="col-lg-6" data-aos="fade-up" data-aos-delay="100">
                <div class="accommodation-category">
                    <h3 class="text-center mb-4">Hotel</h3>

                    <!-- 3 Hotel Images with Individual Prices -->
                    <div class="row">
                        @if (Model.Accommodations != null && Model.Accommodations.Where(a => a._subtype.Contains("Hotel")).Any())
                        {
                            @foreach (var hotel in Model.Accommodations.Where(a => a._subtype.Contains("Hotel")).Take(3))
                            {
                                <div class="col-md-4 mb-3">
                                    <figure class="img-wrap">
                                        <img src="@GetImageUrl(hotel._subtype)"
                                             alt="@hotel._subtype"
                                             class="img-fluid rounded">
                                        <div class="text-center mt-2">
                                            <h6 class="accommodation-name">@hotel._subtype</h6>
                                            <p class="individual-price">
                                                <strong>€@hotel._pricePerNight</strong>
                                                <small class="text-muted d-block">per nacht</small>
                                            </p>
                                        </div>
                                    </figure>
                                </div>
                            }
                        }
                        else
                        {
                            <!-- Fallback if no hotels available -->
                            <div class="col-12 text-center">
                                <p class="text-muted">Geen hotelkamers beschikbaar</p>
                            </div>
                        }
                    </div>

                    <!-- Price Range Summary -->
                    <div class="text-center mt-3">
                        @if (Model.Accommodations != null && Model.Accommodations.Where(a => a._subtype.Contains("Hotel")).Any())
                        {
                            var hotelPrices = Model.Accommodations.Where(a => a._subtype.Contains("Hotel")).ToList();
                            var minPrice = hotelPrices.Min(h => h._pricePerNight);
                            var maxPrice = hotelPrices.Max(h => h._pricePerNight);

                            <p class="price-range-summary">
                                <small>Prijsbereik: €@minPrice - €@maxPrice per nacht</small>
                            </p>
                        }
                    </div>

                    <!-- Single Button -->
                    <div class="text-center">
                        <a asp-page="/Hotel" class="btn btn-primary text-white px-5 py-3">Bekijk Alle Hotels</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- END Accommodations section -->

<style>
    .accommodation-category {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 10px;
        height: 100%;
    }

        .accommodation-category h3 {
            color: #333;
            font-weight: bold;
        }

    .img-wrap img {
        height: 150px;
        object-fit: cover;
        width: 100%;
        transition: transform 0.3s ease;
    }

    .img-wrap:hover img {
        transform: scale(1.05);
    }

    .accommodation-name {
        color: #333;
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.9rem;
    }

    .individual-price {
        margin-bottom: 0;
    }

        .individual-price strong {
            color: #ffba5a;
            font-size: 1.1rem;
        }

    .price-range-summary {
        color: #666;
        font-style: italic;
        margin-bottom: 20px;
    }

    .btn-primary {
        background-color: #ffba5a;
        border-color: #ffba5a;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

        .btn-primary:hover {
            background-color: #e6a64d;
            border-color: #e6a64d;
        }

</style>

<style>
    .accommodation-category {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 10px;
        height: 100%;
    }

        .accommodation-category h3 {
            color: #333;
            font-weight: bold;
        }

    .img-wrap img {
        height: 150px;
        object-fit: cover;
        width: 100%;
        transition: transform 0.3s ease;
    }

    .img-wrap:hover img {
        transform: scale(1.05);
    }

    .accommodation-name {
        color: #333;
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.9rem;
    }

    .individual-price {
        margin-bottom: 0;
    }

        .individual-price strong {
            color: #ffba5a;
            font-size: 1.1rem;
        }

    .price-range-summary {
        color: #666;
        font-style: italic;
        margin-bottom: 20px;
    }

    .btn-primary {
        background-color: #ffba5a;
        border-color: #ffba5a;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

        .btn-primary:hover {
            background-color: #e6a64d;
            border-color: #e6a64d;
        }

</style>


                 

                   


<style>
    .accommodation-category {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 10px;
        height: 100%;
    }

        .accommodation-category h3 {
            color: #333;
            font-weight: bold;
        }

    .img-wrap img {
        height: 150px;
        object-fit: cover;
        width: 100%;
        transition: transform 0.3s ease;
    }

    .img-wrap:hover img {
        transform: scale(1.05);
    }

    .accommodation-name {
        color: #333;
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.9rem;
    }

    .individual-price {
        margin-bottom: 0;
    }

        .individual-price strong {
            color: #ffba5a;
            font-size: 1.1rem;
        }

    .price-range-summary {
        color: #666;
        font-style: italic;
        margin-bottom: 20px;
    }

    .btn-primary {
        background-color: #ffba5a;
        border-color: #ffba5a;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

        .btn-primary:hover {
            background-color: #e6a64d;
            border-color: #e6a64d;
        }

</style>
        

<!-- END Accommodations section -->

@functions {
    private string GetImageUrl(string subtype)
    {
        if (subtype.Contains("Chalet"))
        {
            return subtype.Contains("Small") ? "/images/small-chalet.jpg" :
                   subtype.Contains("Medium") ? "/images/medium-chalet.jpg" :
                   subtype.Contains("XL") ? "/images/xl-chalet.jpg" :
                   "~/images/img_1.jpg";
        }
        else if (subtype.Contains("Hotel"))
        {
            return subtype.Contains("Small") ? "~/images/small-hotel.jpg" :
                   subtype.Contains("Medium") ? "~/images/medium-hotel.jpg" :
                   subtype.Contains("XL") ? "~/images/xl-hotel.jpg" :
                   "~/images/img_3.jpg";
        }
        return "~/images/default-accommodation.jpg";
    }
}
